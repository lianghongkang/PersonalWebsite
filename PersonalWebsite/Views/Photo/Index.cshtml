
@{
    ViewBag.Title = "Index";
}
@using PersonalWebsite.Models;
@model IEnumerable<Photo>


<div id="app" class="container">
    <input type="button" class="btn btn-success"  value="Create"  v-on:click="addInfo()"/>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>序号</th>
                <th>拍摄地点</th>
                <th>上传路径</th>
                <th>标题</th>
               
            </tr>
        </thead>
        <tbody>
            <tr v-for="(item,index) in photos">
                <td>  {{item.Id}}</td>
                <td>  {{item.Location}} </td>
                <td>  {{item.ImageUrl}}</td>
                <td>  {{item.Title}} </td>
                <td>
                    <a href="#" class="btn btn-success" v-on:click="updateInfo(item.Id)">修改</a>
                </td>
            </tr>
        </tbody>
    </table>

</div>
@section scripts{
    <script>
        var app = new Vue({
            el: "#app",
            data: {
                photos: []
            },
            mounted() {
                this.getAllInfos();
            },
            methods: {
                getAllInfos: function () {
                    axios.get('@Url.Action("GetAllInfos", "Photo")')
                        .then(res => {
                            this.infos = [];
                            console.log(res.data);
                            for (var i = 0; i < res.data.length; i++) {
                                this.photos.push(res.data[i]);
                            }
                        });
                },
                addInfo: function (item) {
                    var url = '@Url.Action("Edit", "Photo",new { id=0})';
                    window.location.href = url;
                 
                },
                updateInfo: function () {
                    var id = $（）
                   var url = '@Url.Action("Edit", "Photo",new {id= key })';
                    window.location.href = url;
                }
            }
        })
    </script>
}


